
router.get('/exportFormPdf', async(req,res)=>{
  try{

      console.log("Hello")
      const formDoc = await WshcmForm.find();
      const data = {
          formDoc : formDoc,
      };

      const filePathName = path.resolve(__dirname , '../ejs_file/htmltopdf.ejs');
      const htmlString = fs.readFileSync(filePathName).toString();
      const options = {
        format: 'A2',
        orientation: 'landscape',
        margin: '10mm', // Set all margins to 0
        childProcessOptions: {
          env: { OPENSSL_CONF: '/dev/null' },
        },
      }  
      const ejsData = ejs.render(htmlString , data);

      console.log("EJS Data:", ejsData);
    console.log("Options used for PDF generation:", options);


      pdf.create(ejsData, options).toFile('./exportedPdfs/userForms.pdf', (err, response) => {
          if (err) {
              console.log("Error->>>>>>>>>", err);
              res.status(500).send(err);
          } else {
              console.log('File generated');
              res.send({ filePath: 'userForms.pdf' }); // Send the file path
          }
      });
     
  }catch(err){
      console.log(err.message)
      res.send({status : 0 , message : err.message})
  }
})